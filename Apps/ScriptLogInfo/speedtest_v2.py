import speedtest
from sty import fg, rs

test = speedtest.Speedtest()

@staticmethod
def speedtest_v2_run():
    print(
        fg(160, 70, 170) + "L" +
        fg(165, 70, 165) + "o" +
        fg(170, 70, 160) + "a" +
        fg(175, 70, 155) + "d" +
        fg(180, 70, 150) + "i" +
        fg(185, 70, 145) + "n" +
        fg(190, 70, 140) + "g " +
        fg(195, 70, 135) + "s" +
        fg(200, 70, 130) + "e" +
        fg(205, 70, 125) + "r" +
        fg(210, 70, 120) + "v" +
        fg(215, 70, 115) + "e" +
        fg(220, 70, 110) + "r " +
        fg(225, 70, 105) + "l" +
        fg(230, 70, 100) + "i" +
        fg(235, 70, 95) + "s" +
        fg(240, 70, 90) + "t" +
        fg(245, 70, 85) + "." +
        fg(250, 70, 80) + "." +
        fg(255, 70, 75) + "." + fg.rs)
    test.get_servers()

    print(
        fg(155, 70, 170) + "C" +
        fg(160, 70, 165) + "h" +
        fg(165, 70, 160) + "o" +
        fg(170, 70, 155) + "o" +
        fg(175, 70, 150) + "s" +
        fg(180, 70, 145) + "i" +
        fg(185, 70, 140) + "n" +
        fg(190, 70, 135) + "g " +
        fg(195, 70, 130) + "b" +
        fg(200, 70, 125) + "e" +
        fg(205, 70, 120) + "s" +
        fg(210, 70, 115) + "t " +
        fg(215, 70, 110) + "s" +
        fg(220, 70, 105) + "e" +
        fg(225, 70, 100) + "r" +
        fg(230, 70, 95) + "v" +
        fg(235, 70, 90) + "e" +
        fg(240, 70, 85) + "r" +
        fg(245, 70, 80) + "." +
        fg(250, 70, 75) + "." +
        fg(255, 70, 70) + "." + fg.rs)
    best = test.get_best_server()

    print(
        fg(155, 70, 170) + "F" +
        fg(160, 70, 165) + "o" +
        fg(165, 70, 160) + "u" +
        fg(170, 70, 155) + "n" +
        fg(175, 70, 150) + "d" +
        fg(180, 70, 145) + ": " +
        fg(255, 255, 255) + f"{best['host']} " +
        fg(185, 70, 135) + "l" +
        fg(190, 70, 130) + "o" +
        fg(195, 70, 125) + "c" +
        fg(200, 70, 120) + "a" +
        fg(205, 70, 115) + "t" +
        fg(210, 70, 110) + "e" +
        fg(215, 70, 105) + "d " +
        fg(220, 70, 100) + "i" +
        fg(225, 70, 95) + "n " +
        fg(255, 255, 255) + f"{best['country']}" + fg.rs)

    print(
        fg(155, 70, 170) + "P" +
        fg(160, 70, 165) + "i" +
        fg(165, 70, 160) + "n" +
        fg(170, 70, 155) + "g " +
        fg(175, 70, 150) + "t" +
        fg(180, 70, 145) + "e" +
        fg(185, 70, 140) + "s" +
        fg(190, 70, 135) + "t" +
        fg(195, 70, 130) + "." +
        fg(200, 70, 125) + "." +
        fg(205, 70, 120) + "." + fg.rs)
    ping_result = test.results.ping
    print(fg(255, 255, 204) + "Ping: " + fg(255, 255, 255) + f"{ping_result}" + fg(255, 10, 150) + " ms" + fg.rs)

    print(
        fg(155, 70, 170) + "P" +
        fg(160, 70, 165) + "e" +
        fg(165, 70, 160) + "r" +
        fg(170, 70, 155) + "f" +
        fg(175, 70, 150) + "o" +
        fg(180, 70, 145) + "r" +
        fg(185, 70, 140) + "m" +
        fg(190, 70, 135) + "i" +
        fg(195, 70, 130) + "n" +
        fg(200, 70, 125) + "g " +
        fg(205, 70, 120) + "d" +
        fg(210, 70, 115) + "o" +
        fg(215, 70, 110) + "w" +
        fg(220, 70, 105) + "n" +
        fg(225, 70, 100) + "l" +
        fg(230, 70, 95) + "o" +
        fg(235, 70, 90) + "a" +
        fg(240, 70, 85) + "d " +
        fg(245, 70, 80) + "t" +
        fg(250, 70, 75) + "e" +
        fg(255, 70, 70) + "s" +
        fg(255, 70, 65) + "t" +
        fg(255, 70, 60) + "." +
        fg(255, 70, 55) + "." +
        fg(255, 70, 50) + "." + fg.rs)
    download_result = test.download()
    print(fg(255, 255, 204) + "Download speed: " + fg(255, 255, 255) + f"{download_result / 1024 / 1024:.2f}" + fg(255, 10, 150) + " Mbit/s" + fg.rs)

    print(
        fg(155, 70, 170) + "P" +
        fg(160, 70, 165) + "e" +
        fg(165, 70, 160) + "r" +
        fg(170, 70, 155) + "f" +
        fg(175, 70, 150) + "o" +
        fg(180, 70, 145) + "r" +
        fg(185, 70, 140) + "m" +
        fg(190, 70, 135) + "i" +
        fg(195, 70, 130) + "n" +
        fg(200, 70, 125) + "g " +
        fg(205, 70, 120) + "u" +
        fg(210, 70, 115) + "p" +
        fg(215, 70, 110) + "l" +
        fg(220, 70, 105) + "o" +
        fg(225, 70, 100) + "a" +
        fg(230, 70, 95) + "d " +
        fg(235, 70, 90) + "t" +
        fg(240, 70, 85) + "e" +
        fg(245, 70, 80) + "s" +
        fg(250, 70, 75) + "t" +
        fg(255, 70, 70) + "." +
        fg(255, 70, 65) + "." +
        fg(255, 70, 60) + "." + fg.rs)
    upload_result = test.upload()
    print(fg(255, 255, 204) + "Upload speed: " + fg(255, 255, 255) + f"{upload_result / 1024 / 1024:.2f}" + fg(255, 10, 150) + " Mbit/s" + fg.rs)
